!function(){return function t(e,n,r){function i(s,a){if(!n[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){return i(e[s][1][t]||t)},l,l.exports,t,e,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}}()({1:[function(t,e,n){"use strict";n.byteLength=function(t){var e=c(t),n=e[0],r=e[1];return 3*(n+r)/4-r},n.toByteArray=function(t){var e,n,r=c(t),s=r[0],a=r[1],u=new o(function(t,e,n){return 3*(e+n)/4-n}(0,s,a)),l=0,h=a>0?s-4:s;for(n=0;n<h;n+=4)e=i[t.charCodeAt(n)]<<18|i[t.charCodeAt(n+1)]<<12|i[t.charCodeAt(n+2)]<<6|i[t.charCodeAt(n+3)],u[l++]=e>>16&255,u[l++]=e>>8&255,u[l++]=255&e;2===a&&(e=i[t.charCodeAt(n)]<<2|i[t.charCodeAt(n+1)]>>4,u[l++]=255&e);1===a&&(e=i[t.charCodeAt(n)]<<10|i[t.charCodeAt(n+1)]<<4|i[t.charCodeAt(n+2)]>>2,u[l++]=e>>8&255,u[l++]=255&e);return u},n.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],s=0,a=n-i;s<a;s+=16383)o.push(l(t,s,s+16383>a?a:s+16383));1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=s.length;a<u;++a)r[a]=s[a],i[s.charCodeAt(a)]=a;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function l(t,e,n){for(var i,o,s=[],a=e;a<n;a+=3)i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},{}],2:[function(t,e,n){(function(e){(function(){"use strict";var e=t("base64-js"),r=t("ieee754");n.Buffer=s,n.SlowBuffer=function(t){+t!=t&&(t=0);return s.alloc(+t)},n.INSPECT_MAX_BYTES=50;var i=2147483647;function o(t){if(t>i)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return e.__proto__=s.prototype,e}function s(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return c(t)}return a(t,e,n)}function a(t,e,n){if("string"==typeof t)return function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!s.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var n=0|f(t,e),r=o(n),i=r.write(t,e);i!==n&&(r=r.slice(0,i));return r}(t,e);if(ArrayBuffer.isView(t))return l(t);if(null==t)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(N(t,ArrayBuffer)||t&&N(t.buffer,ArrayBuffer))return function(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n);return r.__proto__=s.prototype,r}(t,e,n);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return s.from(r,e,n);var i=function(t){if(s.isBuffer(t)){var e=0|h(t.length),n=o(e);return 0===n.length?n:(t.copy(n,0,0,e),n)}if(void 0!==t.length)return"number"!=typeof t.length||H(t.length)?o(0):l(t);if("Buffer"===t.type&&Array.isArray(t.data))return l(t.data)}(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return s.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function c(t){return u(t),o(t<0?0:0|h(t))}function l(t){for(var e=t.length<0?0:0|h(t.length),n=o(e),r=0;r<e;r+=1)n[r]=255&t[r];return n}function h(t){if(t>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|t}function f(t,e){if(s.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||N(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var n=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return F(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return O(t).length;default:if(i)return r?-1:F(t).length;e=(""+e).toLowerCase(),i=!0}}function p(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function d(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),H(n=+n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=s.from(e,r)),s.isBuffer(e))return 0===e.length?-1:v(t,e,n,r,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):v(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function v(t,e,n,r,i){var o,s=1,a=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,n/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var l=-1;for(o=n;o<a;o++)if(c(t,o)===c(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(n+u>a&&(n=a-u),o=n;o>=0;o--){for(var h=!0,f=0;f<u;f++)if(c(t,o+f)!==c(e,f)){h=!1;break}if(h)return o}return-1}function y(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(e.substr(2*s,2),16);if(H(a))return s;t[n+s]=a}return s}function g(t,e,n,r){return D(F(e,t.length-n),t,n,r)}function b(t,e,n,r){return D(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function w(t,e,n,r){return b(t,e,n,r)}function m(t,e,n,r){return D(O(e),t,n,r)}function _(t,e,n,r){return D(function(t,e){for(var n,r,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function A(t,n,r){return 0===n&&r===t.length?e.fromByteArray(t):e.fromByteArray(t.slice(n,r))}function E(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,s,a,u,c=t[i],l=null,h=c>239?4:c>223?3:c>191?2:1;if(i+h<=n)switch(h){case 1:c<128&&(l=c);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&c)<<6|63&o)>127&&(l=u);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&(u=(15&c)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(l=u)}null===l?(l=65533,h=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=h}return function(t){var e=t.length;if(e<=S)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=S));return n}(r)}n.kMaxLength=i,s.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(t){return!1}}(),s.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),s.poolSize=8192,s.from=function(t,e,n){return a(t,e,n)},s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,s.alloc=function(t,e,n){return function(t,e,n){return u(t),t<=0?o(t):void 0!==e?"string"==typeof n?o(t).fill(e,n):o(t).fill(e):o(t)}(t,e,n)},s.allocUnsafe=function(t){return c(t)},s.allocUnsafeSlow=function(t){return c(t)},s.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==s.prototype},s.compare=function(t,e){if(N(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),N(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(t)||!s.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},s.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return s.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=s.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var o=t[n];if(N(o,Uint8Array)&&(o=s.from(o)),!s.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},s.byteLength=f,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)p(this,e,e+1);return this},s.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)p(this,e,e+3),p(this,e+1,e+2);return this},s.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)p(this,e,e+7),p(this,e+1,e+6),p(this,e+2,e+5),p(this,e+3,e+4);return this},s.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?E(this,0,t):function(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return T(this,e,n);case"utf8":case"utf-8":return E(this,e,n);case"ascii":return C(this,e,n);case"latin1":case"binary":return x(this,e,n);case"base64":return A(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(t){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===s.compare(this,t)},s.prototype.inspect=function(){var t="",e=n.INSPECT_MAX_BYTES;return t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(t+=" ... "),"<Buffer "+t+">"},s.prototype.compare=function(t,e,n,r,i){if(N(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0),u=Math.min(o,a),c=this.slice(r,i),l=t.slice(e,n),h=0;h<u;++h)if(c[h]!==l[h]){o=c[h],a=l[h];break}return o<a?-1:a<o?1:0},s.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},s.prototype.indexOf=function(t,e,n){return d(this,t,e,n,!0)},s.prototype.lastIndexOf=function(t,e,n){return d(this,t,e,n,!1)},s.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return y(this,t,e,n);case"utf8":case"utf-8":return g(this,t,e,n);case"ascii":return b(this,t,e,n);case"latin1":case"binary":return w(this,t,e,n);case"base64":return m(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var S=4096;function C(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function x(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function T(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=I(t[o]);return i}function B(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function L(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function R(t,e,n,r,i,o){if(!s.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function U(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function k(t,e,n,i,o){return e=+e,n>>>=0,o||U(t,0,n,4),r.write(t,e,n,i,23,4),n+4}function P(t,e,n,i,o){return e=+e,n>>>=0,o||U(t,0,n,8),r.write(t,e,n,i,52,8),n+8}s.prototype.slice=function(t,e){var n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);var r=this.subarray(t,e);return r.__proto__=s.prototype,r},s.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||L(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},s.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||L(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},s.prototype.readUInt8=function(t,e){return t>>>=0,e||L(t,1,this.length),this[t]},s.prototype.readUInt16LE=function(t,e){return t>>>=0,e||L(t,2,this.length),this[t]|this[t+1]<<8},s.prototype.readUInt16BE=function(t,e){return t>>>=0,e||L(t,2,this.length),this[t]<<8|this[t+1]},s.prototype.readUInt32LE=function(t,e){return t>>>=0,e||L(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},s.prototype.readUInt32BE=function(t,e){return t>>>=0,e||L(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},s.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||L(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},s.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||L(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},s.prototype.readInt8=function(t,e){return t>>>=0,e||L(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},s.prototype.readInt16LE=function(t,e){t>>>=0,e||L(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(t,e){t>>>=0,e||L(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(t,e){return t>>>=0,e||L(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},s.prototype.readInt32BE=function(t,e){return t>>>=0,e||L(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},s.prototype.readFloatLE=function(t,e){return t>>>=0,e||L(t,4,this.length),r.read(this,t,!0,23,4)},s.prototype.readFloatBE=function(t,e){return t>>>=0,e||L(t,4,this.length),r.read(this,t,!1,23,4)},s.prototype.readDoubleLE=function(t,e){return t>>>=0,e||L(t,8,this.length),r.read(this,t,!0,52,8)},s.prototype.readDoubleBE=function(t,e){return t>>>=0,e||L(t,8,this.length),r.read(this,t,!1,52,8)},s.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e>>>=0,n>>>=0,r)||R(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},s.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e>>>=0,n>>>=0,r)||R(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},s.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,1,255,0),this[e]=255&t,e+1},s.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},s.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},s.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},s.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},s.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){var i=Math.pow(2,8*n-1);R(this,t,e,n,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},s.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){var i=Math.pow(2,8*n-1);R(this,t,e,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},s.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},s.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},s.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},s.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},s.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},s.prototype.writeFloatLE=function(t,e,n){return k(this,t,e,!0,n)},s.prototype.writeFloatBE=function(t,e,n){return k(this,t,e,!1,n)},s.prototype.writeDoubleLE=function(t,e,n){return P(this,t,e,!0,n)},s.prototype.writeDoubleBE=function(t,e,n){return P(this,t,e,!1,n)},s.prototype.copy=function(t,e,n,r){if(!s.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i=r-n;if(this===t&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(e,n,r);else if(this===t&&n<e&&e<r)for(var o=i-1;o>=0;--o)t[o+e]=this[o+n];else Uint8Array.prototype.set.call(t,this.subarray(n,r),e);return i},s.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!s.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){var i=t.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(t=i)}}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var a=s.isBuffer(t)?t:s.from(t,r),u=a.length;if(0===u)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<n-e;++o)this[o+e]=a[o%u]}return this};var M=/[^+/0-9A-Za-z-_]/g;function I(t){return t<16?"0"+t.toString(16):t.toString(16)}function F(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],s=0;s<r;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function O(t){return e.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(M,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function D(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function N(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function H(t){return t!=t}}).call(this)}).call(this,t("buffer").Buffer)},{"base64-js":1,buffer:2,ieee754:5}],3:[function(t,e,n){(function(t){(function(){var r,i;r=this,i=function(e){"use strict";var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function r(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}function i(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function o(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function s(){}function a(){a.init.call(this)}function u(t){return void 0===t._maxListeners?a.defaultMaxListeners:t._maxListeners}function c(t,e,n,r){var i,o,a,c;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((o=t._events)?(o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),a=o[e]):(o=t._events=new s,t._eventsCount=0),a){if("function"==typeof a?a=o[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),!a.warned&&(i=u(t))&&i>0&&a.length>i){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=a.length,c=l,"function"==typeof console.warn?console.warn(c):console.log(c)}}else a=o[e]=n,++t._eventsCount;return t}function l(t,e,n){var r=!1;function i(){t.removeListener(e,i),r||(r=!0,n.apply(t,arguments))}return i.listener=n,i}function h(t){var e=this._events;if(e){var n=e[t];if("function"==typeof n)return 1;if(n)return n.length}return 0}function f(t,e){for(var n=new Array(e);e--;)n[e]=t[e];return n}s.prototype=Object.create(null),a.EventEmitter=a,a.usingDomains=!1,a.prototype.domain=void 0,a.prototype._events=void 0,a.prototype._maxListeners=void 0,a.defaultMaxListeners=10,a.init=function(){this.domain=null,a.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new s,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},a.prototype.getMaxListeners=function(){return u(this)},a.prototype.emit=function(t){var e,n,r,i,o,s,a,u="error"===t;if(s=this._events)u=u&&null==s.error;else if(!u)return!1;if(a=this.domain,u){if(e=arguments[1],!a){if(e instanceof Error)throw e;var c=new Error('Uncaught, unspecified "error" event. ('+e+")");throw c.context=e,c}return e||(e=new Error('Uncaught, unspecified "error" event')),e.domainEmitter=this,e.domain=a,e.domainThrown=!1,a.emit("error",e),!1}if(!(n=s[t]))return!1;var l="function"==typeof n;switch(r=arguments.length){case 1:!function(t,e,n){if(e)t.call(n);else for(var r=t.length,i=f(t,r),o=0;o<r;++o)i[o].call(n)}(n,l,this);break;case 2:!function(t,e,n,r){if(e)t.call(n,r);else for(var i=t.length,o=f(t,i),s=0;s<i;++s)o[s].call(n,r)}(n,l,this,arguments[1]);break;case 3:!function(t,e,n,r,i){if(e)t.call(n,r,i);else for(var o=t.length,s=f(t,o),a=0;a<o;++a)s[a].call(n,r,i)}(n,l,this,arguments[1],arguments[2]);break;case 4:!function(t,e,n,r,i,o){if(e)t.call(n,r,i,o);else for(var s=t.length,a=f(t,s),u=0;u<s;++u)a[u].call(n,r,i,o)}(n,l,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),o=1;o<r;o++)i[o-1]=arguments[o];!function(t,e,n,r){if(e)t.apply(n,r);else for(var i=t.length,o=f(t,i),s=0;s<i;++s)o[s].apply(n,r)}(n,l,this,i)}return!0},a.prototype.addListener=function(t,e){return c(this,t,e,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(t,e){return c(this,t,e,!0)},a.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,l(this,t,e)),this},a.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,l(this,t,e)),this},a.prototype.removeListener=function(t,e){var n,r,i,o,a;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[t]))return this;if(n===e||n.listener&&n.listener===e)0==--this._eventsCount?this._events=new s:(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,o=n.length;o-- >0;)if(n[o]===e||n[o].listener&&n[o].listener===e){a=n[o].listener,i=o;break}if(i<0)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new s,this;delete r[t]}else!function(t,e){for(var n=e,r=n+1,i=t.length;r<i;n+=1,r+=1)t[n]=t[r];t.pop()}(n,i);r.removeListener&&this.emit("removeListener",t,a||e)}return this},a.prototype.removeAllListeners=function(t){var e,n;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=new s,this._eventsCount=0):n[t]&&(0==--this._eventsCount?this._events=new s:delete n[t]),this;if(0===arguments.length){for(var r,i=Object.keys(n),o=0;o<i.length;++o)"removeListener"!==(r=i[o])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new s,this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(e)do{this.removeListener(t,e[e.length-1])}while(e[0]);return this},a.prototype.listeners=function(t){var e,n=this._events;return n&&(e=n[t])?"function"==typeof e?[e.listener||e]:function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(e):[]},a.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):h.call(t,e)},a.prototype.listenerCount=h,a.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var p,d=1e7,v=function(){function t(){this.locked=!1}return t.prototype.lock=function(){return i(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return this.locked?[4,new Promise(function(t){return setTimeout(t,1)})]:[3,2];case 1:return t.sent(),[3,0];case 2:return this.locked=!0,[2]}})})},t.prototype.unlock=function(){this.locked=!1},t}(),y=function(t){function e(e,n,r){void 0===n&&(n=0),void 0===r&&(r=d);var i=t.call(this)||this;i.transport=e,i.mode=n,i.clockFrequency=r,i.connected=!1,i.sendMutex=new v,i.blockSize=i.transport.packetSize-4-1;var o=i.transport.packetSize-2-1;return i.operationCount=Math.floor(o/5),i}return r(e,t),e.prototype.bufferSourceToUint8Array=function(t,e){if(!e)return new Uint8Array([t]);var n=void 0!==e.buffer?e.buffer:e,r=new Uint8Array(n.byteLength+1);return r.set([t]),r.set(new Uint8Array(n),1),r},e.prototype.selectProtocol=function(t){return i(this,void 0,void 0,function(){var e;return o(this,function(n){switch(n.label){case 0:return e=2===t?59196:59294,[4,this.swjSequence(new Uint8Array([255,255,255,255,255,255,255]))];case 1:return n.sent(),[4,this.swjSequence(new Uint16Array([e]))];case 2:return n.sent(),[4,this.swjSequence(new Uint8Array([255,255,255,255,255,255,255]))];case 3:return n.sent(),[4,this.swjSequence(new Uint8Array([0]))];case 4:return n.sent(),[2]}})})},e.prototype.send=function(t,e){return i(this,void 0,void 0,function(){var n,r;return o(this,function(i){switch(i.label){case 0:return n=this.bufferSourceToUint8Array(t,e),[4,this.sendMutex.lock()];case 1:i.sent(),i.label=2;case 2:return i.trys.push([2,,5,6]),[4,this.transport.write(n)];case 3:return i.sent(),[4,this.transport.read()];case 4:if((r=i.sent()).getUint8(0)!==t)throw new Error("Bad response for "+t+" -> "+r.getUint8(0));switch(t){case 3:case 8:case 9:case 10:case 17:case 18:case 19:case 29:case 23:case 24:case 26:case 21:case 22:case 4:if(0!==r.getUint8(1))throw new Error("Bad status for "+t+" -> "+r.getUint8(1))}return[2,r];case 5:return this.sendMutex.unlock(),[7];case 6:return[2]}})})},e.prototype.clearAbort=function(t){return void 0===t&&(t=30),i(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,this.send(8,new Uint8Array([0,t]))];case 1:return e.sent(),[2]}})})},e.prototype.dapInfo=function(t){return i(this,void 0,void 0,function(){var e,n,r,i;return o(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,4]),[4,this.send(0,new Uint8Array([t]))];case 1:if(e=o.sent(),0===(n=e.getUint8(1)))return[2,""];switch(t){case 240:case 254:case 255:case 253:if(1===n)return[2,e.getUint8(2)];if(2===n)return[2,e.getUint16(2)];if(4===n)return[2,e.getUint32(2)]}return r=Array.prototype.slice.call(new Uint8Array(e.buffer,2,n)),[2,String.fromCharCode.apply(null,r)];case 2:return i=o.sent(),[4,this.clearAbort()];case 3:throw o.sent(),i;case 4:return[2]}})})},e.prototype.swjSequence=function(t,e){return void 0===e&&(e=8*t.byteLength),i(this,void 0,void 0,function(){var n,r;return o(this,function(i){switch(i.label){case 0:n=this.bufferSourceToUint8Array(e,t),i.label=1;case 1:return i.trys.push([1,3,,5]),[4,this.send(18,n)];case 2:return i.sent(),[3,5];case 3:return r=i.sent(),[4,this.clearAbort()];case 4:throw i.sent(),r;case 5:return[2]}})})},e.prototype.swjClock=function(t){return i(this,void 0,void 0,function(){var e;return o(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,4]),[4,this.send(17,new Uint8Array([255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24]))];case 1:return n.sent(),[3,4];case 2:return e=n.sent(),[4,this.clearAbort()];case 3:throw n.sent(),e;case 4:return[2]}})})},e.prototype.swjPins=function(t,e,n){return i(this,void 0,void 0,function(){var r;return o(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,4]),[4,this.send(16,new Uint8Array([t,e,255&n,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24]))];case 1:return[2,i.sent().getUint8(1)];case 2:return r=i.sent(),[4,this.clearAbort()];case 3:throw i.sent(),r;case 4:return[2]}})})},e.prototype.dapDelay=function(t){return i(this,void 0,void 0,function(){var e;return o(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,4]),[4,this.send(9,new Uint8Array([255&t,(65280&t)>>8]))];case 1:return n.sent(),[3,4];case 2:return e=n.sent(),[4,this.clearAbort()];case 3:throw n.sent(),e;case 4:return[2]}})})},e.prototype.configureTransfer=function(t,e,n){return i(this,void 0,void 0,function(){var r,i,s;return o(this,function(o){switch(o.label){case 0:r=new Uint8Array(5),(i=new DataView(r.buffer)).setUint8(0,t),i.setUint16(1,e,!0),i.setUint16(3,n,!0),o.label=1;case 1:return o.trys.push([1,3,,5]),[4,this.send(4,r)];case 2:return o.sent(),[3,5];case 3:return s=o.sent(),[4,this.clearAbort()];case 4:throw o.sent(),s;case 5:return[2]}})})},e.prototype.connect=function(){return i(this,void 0,void 0,function(){var t,e,n;return o(this,function(r){switch(r.label){case 0:return!0===this.connected?[2]:[4,this.transport.open()];case 1:r.sent(),r.label=2;case 2:return r.trys.push([2,5,,8]),[4,this.send(17,new Uint32Array([this.clockFrequency]))];case 3:return r.sent(),[4,this.send(2,new Uint8Array([this.mode]))];case 4:if(0===(t=r.sent()).getUint8(1)||0!==this.mode&&t.getUint8(1)!==this.mode)throw new Error("Mode not enabled.");return[3,8];case 5:return e=r.sent(),[4,this.clearAbort()];case 6:return r.sent(),[4,this.transport.close()];case 7:throw r.sent(),e;case 8:return r.trys.push([8,11,,13]),[4,this.configureTransfer(0,100,0)];case 9:return r.sent(),[4,this.selectProtocol(1)];case 10:return r.sent(),[3,13];case 11:return n=r.sent(),[4,this.transport.close()];case 12:throw r.sent(),n;case 13:return this.connected=!0,[2]}})})},e.prototype.disconnect=function(){return i(this,void 0,void 0,function(){var t;return o(this,function(e){switch(e.label){case 0:if(!1===this.connected)return[2];e.label=1;case 1:return e.trys.push([1,3,,5]),[4,this.send(3)];case 2:return e.sent(),[3,5];case 3:return t=e.sent(),[4,this.clearAbort()];case 4:throw e.sent(),t;case 5:return[4,this.transport.close()];case 6:return e.sent(),this.connected=!1,[2]}})})},e.prototype.reconnect=function(){return i(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,this.disconnect()];case 1:return t.sent(),[4,new Promise(function(t){return setTimeout(t,100)})];case 2:return t.sent(),[4,this.connect()];case 3:return t.sent(),[2]}})})},e.prototype.reset=function(){return i(this,void 0,void 0,function(){var t;return o(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,4]),[4,this.send(10)];case 1:return[2,1===e.sent().getUint8(2)];case 2:return t=e.sent(),[4,this.clearAbort()];case 3:throw e.sent(),t;case 4:return[2]}})})},e.prototype.transfer=function(t,e,n,r){return void 0===e&&(e=2),void 0===n&&(n=0),void 0===r&&(r=0),i(this,void 0,void 0,function(){var i,s,a,u,c,l,h;return o(this,function(o){switch(o.label){case 0:i="number"==typeof t?[{port:t,mode:e,register:n,value:r}]:t,s=new Uint8Array(2+5*i.length),(a=new DataView(s.buffer)).setUint8(0,0),a.setUint8(1,i.length),i.forEach(function(t,e){var n=2+5*e;a.setUint8(n,t.port|t.mode|t.register),a.setUint32(n+1,t.value||0,!0)}),o.label=1;case 1:return o.trys.push([1,3,,5]),[4,this.send(5,s)];case 2:if((u=o.sent()).getUint8(1)!==i.length)throw new Error("Transfer count mismatch");if(2===(c=u.getUint8(2)))throw new Error("Transfer response WAIT");if(4===c)throw new Error("Transfer response FAULT");if(8===c)throw new Error("Transfer response PROTOCOL_ERROR");if(16===c)throw new Error("Transfer response VALUE_MISMATCH");if(7===c)throw new Error("Transfer response NO_ACK");return"number"==typeof t?[2,u.getUint32(3,!0)]:(l=4*i.length,[2,new Uint32Array(u.buffer.slice(3,3+l))]);case 3:return h=o.sent(),[4,this.clearAbort()];case 4:throw o.sent(),h;case 5:return[2]}})})},e.prototype.transferBlock=function(t,e,n){return i(this,void 0,void 0,function(){var r,i,s,a,u,c,l,h;return o(this,function(o){switch(o.label){case 0:s=4,"number"==typeof n?(r=n,i=2):(r=n.length,i=0,s+=n.byteLength),a=new Uint8Array(s),(u=new DataView(a.buffer)).setUint8(0,0),u.setUint16(1,r,!0),u.setUint8(3,t|i|e),"number"!=typeof n&&n.forEach(function(t,e){var n=4+4*e;u.setUint32(n,t,!0)}),o.label=1;case 1:return o.trys.push([1,3,,5]),[4,this.send(6,u)];case 2:if((c=o.sent()).getUint16(1,!0)!==r)throw new Error("Transfer count mismatch");if(2===(l=c.getUint8(3)))throw new Error("Transfer response WAIT");if(4===l)throw new Error("Transfer response FAULT");if(8===l)throw new Error("Transfer response PROTOCOL_ERROR");if(7===l)throw new Error("Transfer response NO_ACK");return"number"==typeof n?[2,new Uint32Array(c.buffer.slice(4,4+4*r))]:[3,5];case 3:return h=o.sent(),[4,this.clearAbort()];case 4:throw o.sent(),h;case 5:return[2,void 0]}})})},e}(a),g=/[\xc0-\xff][\x80-\xbf]*$/g,b=/[\xc0-\xff][\x80-\xbf]*/g,w=new(function(){function t(){}return t.prototype.decode=function(t){var e=Array.prototype.slice.call(new Uint8Array(t)),n=String.fromCodePoint.apply(void 0,e);this.partialChar&&(n=""+this.partialChar+n,this.partialChar=void 0);var r=n.match(g);if(r){var i=r[0].length;this.partialChar=n.slice(-i),n=n.slice(0,-i)}return n.replace(b,this.decoderReplacer)},t.prototype.decoderReplacer=function(t){var e=t.codePointAt(0)<<24,n=Math.clz32(~e),r=0,i=t.length,o="";if(n<5&&i>=n){for(e=e<<n>>>24+n,r=1;r<n;r+=1)e=e<<6|63&t.codePointAt(r);e<=65535?o+=String.fromCodePoint(e):e<=1114111?(e-=65536,o+=String.fromCodePoint(55296+(e>>10),56320+(1023&e))):r=0}for(;r<i;r+=1)o+="ï¿½";return o},t}()),m=function(t){function e(n,r,s){void 0===r&&(r=0),void 0===s&&(s=d);var a=t.call(this,n,r,s)||this;return a.serialPolling=!1,a.serialListeners=!1,a.on("newListener",function(t){return i(a,void 0,void 0,function(){return o(this,function(n){return t===e.EVENT_SERIAL_DATA&&0===this.listenerCount(t)&&(this.serialListeners=!0),[2]})})}),a.on("removeListener",function(t){t===e.EVENT_SERIAL_DATA&&0===a.listenerCount(t)&&(a.serialListeners=!1)}),a}return r(e,t),e.prototype.isBufferBinary=function(t){for(var e=Array.prototype.slice.call(new Uint16Array(t,0,50)),n=String.fromCharCode.apply(null,e),r=0;r<n.length;r++){var i=n.charCodeAt(r);if(65533===i||i<=8)return!0}return!1},e.prototype.writeBuffer=function(t,n,r){return void 0===r&&(r=0),i(this,void 0,void 0,function(){var i,s,a,u;return o(this,function(o){switch(o.label){case 0:i=Math.min(t.byteLength,r+n),s=t.slice(r,i),(a=new Uint8Array(s.byteLength+1)).set([s.byteLength]),a.set(new Uint8Array(s),1),o.label=1;case 1:return o.trys.push([1,3,,5]),[4,this.send(140,a)];case 2:return o.sent(),[3,5];case 3:return u=o.sent(),[4,this.clearAbort()];case 4:throw o.sent(),u;case 5:return this.emit(e.EVENT_PROGRESS,r/t.byteLength),i<t.byteLength?[2,this.writeBuffer(t,n,i)]:[2]}})})},e.prototype.flash=function(t,n){return void 0===n&&(n=62),i(this,void 0,void 0,function(){var r,i,s;return o(this,function(o){switch(o.label){case 0:r=function(t){return void 0!==t.buffer}(t)?t.buffer:t,i=this.isBufferBinary(r)?0:1,o.label=1;case 1:return o.trys.push([1,6,,8]),[4,this.send(138,new Uint32Array([i]))];case 2:if(0!==o.sent().getUint8(1))throw new Error("Flash error");return[4,this.writeBuffer(r,n)];case 3:return o.sent(),this.emit(e.EVENT_PROGRESS,1),[4,this.send(139)];case 4:if(0!==o.sent().getUint8(1))throw new Error("Flash error");return[4,this.send(137)];case 5:return o.sent(),[3,8];case 6:return s=o.sent(),[4,this.clearAbort()];case 7:throw o.sent(),s;case 8:return[2]}})})},e.prototype.getSerialBaudrate=function(){return i(this,void 0,void 0,function(){var t;return o(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,4]),[4,this.send(129)];case 1:return[2,e.sent().getUint32(1,!0)];case 2:return t=e.sent(),[4,this.clearAbort()];case 3:throw e.sent(),t;case 4:return[2]}})})},e.prototype.setSerialBaudrate=function(t){return void 0===t&&(t=9600),i(this,void 0,void 0,function(){var e;return o(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,4]),[4,this.send(130,new Uint32Array([t]))];case 1:return n.sent(),[3,4];case 2:return e=n.sent(),[4,this.clearAbort()];case 3:throw n.sent(),e;case 4:return[2]}})})},e.prototype.serialWrite=function(t){return i(this,void 0,void 0,function(){var e,n;return o(this,function(r){switch(r.label){case 0:(e=t.split("").map(function(t){return t.charCodeAt(0)})).unshift(e.length),r.label=1;case 1:return r.trys.push([1,3,,5]),[4,this.send(132,new Uint8Array(e).buffer)];case 2:return r.sent(),[3,5];case 3:return n=r.sent(),[4,this.clearAbort()];case 4:throw r.sent(),n;case 5:return[2]}})})},e.prototype.serialRead=function(){return i(this,void 0,void 0,function(){var t,e,n;return o(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,4]),[4,this.send(131)];case 1:return 0===(t=r.sent()).byteLength||131!==t.getUint8(0)||0===(e=t.getUint8(1))?[2,void 0]:[2,t.buffer.slice(2,2+e)];case 2:return n=r.sent(),[4,this.clearAbort()];case 3:throw r.sent(),n;case 4:return[2]}})})},e.prototype.startSerialRead=function(t,n){return void 0===t&&(t=100),void 0===n&&(n=!0),i(this,void 0,void 0,function(){var r,i,s;return o(this,function(o){switch(o.label){case 0:this.serialPolling=!0,o.label=1;case 1:return this.serialPolling?this.serialListeners?(r=this.connected,!1!==this.connected||!0!==n?[3,3]:[4,this.connect()]):[3,7]:[3,9];case 2:o.sent(),o.label=3;case 3:return[4,this.serialRead()];case 4:return i=o.sent(),!1!==r||!0!==n?[3,6]:[4,this.disconnect()];case 5:o.sent(),o.label=6;case 6:void 0!==i&&(s=w.decode(i),this.emit(e.EVENT_SERIAL_DATA,s)),o.label=7;case 7:return[4,new Promise(function(e){return setTimeout(e,t)})];case 8:return o.sent(),[3,1];case 9:return[2]}})})},e.prototype.stopSerialRead=function(){this.serialPolling=!1},e.EVENT_PROGRESS="progress",e.EVENT_SERIAL_DATA="serial",e}(y),_=function(){function t(t,e,n){void 0===e&&(e=0),void 0===n&&(n=d),this.proxy=void 0!==t.open?new y(t,e,n):t}return t.prototype.waitDelay=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=100),i(this,void 0,void 0,function(){var r;return o(this,function(i){switch(i.label){case 0:r=!0,e>0&&setTimeout(function(){if(r)throw r=!1,new Error("Wait timed out")},e),i.label=1;case 1:return r?[4,t()]:[3,5];case 2:return!0===i.sent()?(r=!1,[2]):n>0?[4,new Promise(function(t){return setTimeout(t,e)})]:[3,4];case 3:i.sent(),i.label=4;case 4:return[3,1];case 5:return[2]}})})},t.prototype.concatTypedArray=function(t){if(1===t.length)return t[0];for(var e=0,n=0,r=t;n<r.length;n++)e+=r[n].length;for(var i=new Uint32Array(e),o=0,s=0;o<t.length;o++)i.set(t[o],s),s+=t[o].length;return i},t.prototype.readDPCommand=function(t){return[{mode:2,port:0,register:t}]},t.prototype.writeDPCommand=function(t,e){if(8===t){if(e===this.selectedAddress)return[];this.selectedAddress=e}return[{mode:0,port:0,register:t,value:e}]},t.prototype.readAPCommand=function(t){var e=4278190080&t|240&t;return this.writeDPCommand(8,e).concat({mode:2,port:1,register:t})},t.prototype.writeAPCommand=function(t,e){if(0===t){if(e===this.cswValue)return[];this.cswValue=e}var n=4278190080&t|240&t;return this.writeDPCommand(8,n).concat({mode:0,port:1,register:t,value:e})},t.prototype.readMem16Command=function(t){return this.writeAPCommand(0,587202641).concat(this.writeAPCommand(4,t)).concat(this.readAPCommand(12))},t.prototype.writeMem16Command=function(t,e){return this.writeAPCommand(0,587202641).concat(this.writeAPCommand(4,t)).concat(this.writeAPCommand(12,e))},t.prototype.readMem32Command=function(t){return this.writeAPCommand(0,587202642).concat(this.writeAPCommand(4,t)).concat(this.readAPCommand(12))},t.prototype.writeMem32Command=function(t,e){return this.writeAPCommand(0,587202642).concat(this.writeAPCommand(4,t)).concat(this.writeAPCommand(12,e))},t.prototype.transferSequence=function(t){return i(this,void 0,void 0,function(){var e,n,r,i;return o(this,function(o){switch(o.label){case 0:e=(e=[]).concat.apply(e,t),n=[],o.label=1;case 1:return e.length?(r=e.splice(0,this.proxy.operationCount),[4,this.proxy.transfer(r)]):[3,3];case 2:return i=o.sent(),n.push(i),[3,1];case 3:return[2,this.concatTypedArray(n)]}})})},t.prototype.connect=function(){return i(this,void 0,void 0,function(){var t,e=this;return o(this,function(n){switch(n.label){case 0:return t=-1610612736,[4,this.proxy.connect()];case 1:return n.sent(),[4,this.readDP(0)];case 2:return n.sent(),[4,this.transferSequence([this.writeDPCommand(0,4),this.writeDPCommand(8,0),this.writeDPCommand(4,1342177280)])];case 3:return n.sent(),[4,this.waitDelay(function(){return i(e,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,this.readDP(4)];case 1:return[2,(e.sent()&t)===t]}})})})];case 4:return n.sent(),[2]}})})},t.prototype.disconnect=function(){return this.proxy.disconnect()},t.prototype.reconnect=function(){return i(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,this.disconnect()];case 1:return t.sent(),[4,new Promise(function(t){return setTimeout(t,100)})];case 2:return t.sent(),[4,this.connect()];case 3:return t.sent(),[2]}})})},t.prototype.reset=function(){return this.proxy.reset()},t.prototype.readDP=function(t){return i(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,this.proxy.transfer(this.readDPCommand(t))];case 1:return[2,e.sent()[0]]}})})},t.prototype.writeDP=function(t,e){return i(this,void 0,void 0,function(){return o(this,function(n){switch(n.label){case 0:return[4,this.proxy.transfer(this.writeDPCommand(t,e))];case 1:return n.sent(),[2]}})})},t.prototype.readAP=function(t){return i(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,this.proxy.transfer(this.readAPCommand(t))];case 1:return[2,e.sent()[0]]}})})},t.prototype.writeAP=function(t,e){return i(this,void 0,void 0,function(){return o(this,function(n){switch(n.label){case 0:return[4,this.proxy.transfer(this.writeAPCommand(t,e))];case 1:return n.sent(),[2]}})})},t.prototype.readMem16=function(t){return i(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,this.proxy.transfer(this.readMem16Command(t))];case 1:return[2,e.sent()[0]]}})})},t.prototype.writeMem16=function(t,e){return i(this,void 0,void 0,function(){return o(this,function(n){switch(n.label){case 0:return e<<=(2&t)<<3,[4,this.proxy.transfer(this.writeMem16Command(t,e))];case 1:return n.sent(),[2]}})})},t.prototype.readMem32=function(t){return i(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,this.proxy.transfer(this.readMem32Command(t))];case 1:return[2,e.sent()[0]]}})})},t.prototype.writeMem32=function(t,e){return i(this,void 0,void 0,function(){return o(this,function(n){switch(n.label){case 0:return[4,this.proxy.transfer(this.writeMem32Command(t,e))];case 1:return n.sent(),[2]}})})},t.prototype.readBlock=function(t,e){return i(this,void 0,void 0,function(){var n,r,i,s;return o(this,function(o){switch(o.label){case 0:return[4,this.transferSequence([this.writeAPCommand(0,587202642),this.writeAPCommand(4,t)])];case 1:o.sent(),n=[],r=e,o.label=2;case 2:return r>0?(i=Math.min(r,Math.floor(this.proxy.blockSize/4)),[4,this.proxy.transferBlock(1,12,i)]):[3,4];case 3:return s=o.sent(),n.push(s),r-=i,[3,2];case 4:return[2,this.concatTypedArray(n)]}})})},t.prototype.writeBlock=function(t,e){return i(this,void 0,void 0,function(){var n,r;return o(this,function(i){switch(i.label){case 0:return[4,this.transferSequence([this.writeAPCommand(0,587202642),this.writeAPCommand(4,t)])];case 1:i.sent(),n=0,i.label=2;case 2:return n<e.length?(r=e.slice(n,n+Math.floor(this.proxy.blockSize/4)),[4,this.proxy.transferBlock(1,12,r)]):[3,4];case 3:return i.sent(),n+=Math.floor(this.proxy.blockSize/4),[3,2];case 4:return[2]}})})},t}(),A=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.enableDebug=function(){return this.writeMem32(3758157296,-1604386815)},e.prototype.readCoreRegisterCommand=function(t){return this.writeMem32Command(3758157300,t).concat(this.readMem32Command(3758157296)).concat(this.readMem32Command(3758157304))},e.prototype.writeCoreRegisterCommand=function(t,e){return this.writeMem32Command(3758157304,e).concat(this.writeMem32Command(3758157300,65536|t))},e.prototype.getState=function(){return i(this,void 0,void 0,function(){var t,e,n;return o(this,function(r){switch(r.label){case 0:return[4,this.readMem32(3758157296)];case 1:return t=r.sent(),e=524288&t?1:262144&t?2:131072&t?3:4,33554432&t?[4,this.readMem32(3758157296)]:[3,3];case 2:return 33554432&(n=r.sent())&&!(16777216&n)?[2,0]:[2,e];case 3:return[2,e];case 4:return[2]}})})},e.prototype.isHalted=function(){return i(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,this.readMem32(3758157296)];case 1:return[2,!!(131072&t.sent())]}})})},e.prototype.halt=function(t,e){return void 0===t&&(t=!0),void 0===e&&(e=0),i(this,void 0,void 0,function(){var n=this;return o(this,function(r){switch(r.label){case 0:return[4,this.isHalted()];case 1:return r.sent()?[2]:[4,this.writeMem32(3758157296,-1604386813)];case 2:return r.sent(),t?[2,this.waitDelay(function(){return n.isHalted()},e)]:[2]}})})},e.prototype.resume=function(t,e){return void 0===t&&(t=!0),void 0===e&&(e=0),i(this,void 0,void 0,function(){var n=this;return o(this,function(r){switch(r.label){case 0:return[4,this.isHalted()];case 1:return r.sent()?[4,this.writeMem32(3758157104,7)]:[2];case 2:return r.sent(),[4,this.enableDebug()];case 3:return r.sent(),t?[2,this.waitDelay(function(){return i(n,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,this.isHalted()];case 1:return[2,!t.sent()]}})})},e)]:[2]}})})},e.prototype.readCoreRegister=function(t){return i(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,this.transferSequence([this.writeMem32Command(3758157300,t),this.readMem32Command(3758157296)])];case 1:if(!(65536&e.sent()[0]))throw new Error("Register not ready");return[2,this.readMem32(3758157304)]}})})},e.prototype.readCoreRegisters=function(t){return i(this,void 0,void 0,function(){var e,n,r,i,s;return o(this,function(o){switch(o.label){case 0:e=[],n=0,r=t,o.label=1;case 1:return n<r.length?(i=r[n],[4,this.readCoreRegister(i)]):[3,4];case 2:s=o.sent(),e.push(s),o.label=3;case 3:return n++,[3,1];case 4:return[2,e]}})})},e.prototype.writeCoreRegister=function(t,e){return i(this,void 0,void 0,function(){return o(this,function(n){switch(n.label){case 0:return[4,this.transferSequence([this.writeMem32Command(3758157304,e),this.writeMem32Command(3758157300,65536|t),this.readMem32Command(3758157296)])];case 1:if(!(65536&n.sent()[0]))throw new Error("Register not ready");return[2]}})})},e.prototype.execute=function(t,e,n,r,s){void 0===s&&(s=t+1);for(var a=[],u=5;u<arguments.length;u++)a[u-5]=arguments[u];return i(this,void 0,void 0,function(){var i,u,c,l=this;return o(this,function(o){switch(o.label){case 0:for(48682!==e[e.length-1]&&((i=new Uint32Array(e.length+1)).set(e),i.set([48682],e.length-1),e=i),u=[this.writeCoreRegisterCommand(13,n),this.writeCoreRegisterCommand(15,r),this.writeCoreRegisterCommand(14,s)],c=0;c<Math.min(a.length,12);c++)u.push(this.writeCoreRegisterCommand(c,a[c]));return u.push(this.writeCoreRegisterCommand(16,16777216)),[4,this.halt()];case 1:return o.sent(),[4,this.transferSequence(u)];case 2:return o.sent(),[4,this.writeBlock(t,e)];case 3:return o.sent(),[4,this.resume(!1)];case 4:return o.sent(),[4,this.waitDelay(function(){return l.isHalted()},1e4)];case 5:return o.sent(),[2]}})})},e.prototype.softReset=function(){return i(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,this.writeMem32(3758157308,0)];case 1:return t.sent(),[2,this.writeMem32(3758157068,100270084)]}})})},e.prototype.setTargetResetState=function(t){return void 0===t&&(t=!0),i(this,void 0,void 0,function(){var e;return o(this,function(n){switch(n.label){case 0:return[4,this.writeMem32(3758157308,1)];case 1:return n.sent(),!0!==t?[3,3]:[4,this.reset()];case 2:return n.sent(),[3,6];case 3:return[4,this.readMem32(3758157068)];case 4:return e=n.sent(),[4,this.writeMem32(3758157068,100270084|e)];case 5:n.sent(),n.label=6;case 6:return[4,this.writeMem32(3758157308,0)];case 7:return n.sent(),[2]}})})},e}(_);(p=e.FPBCtrlMask||(e.FPBCtrlMask={}))[p.ENABLE=1]="ENABLE",p[p.KEY=2]="KEY";var E=function(){function t(t){this.device=t,this.os="browser",this.packetSize=64}return t.prototype.open=function(){return i(this,void 0,void 0,function(){return o(this,function(t){return[2]})})},t.prototype.close=function(){return i(this,void 0,void 0,function(){return o(this,function(t){return this.device.close(),[2]})})},t.prototype.read=function(){return i(this,void 0,void 0,function(){var t,e,n=this;return o(this,function(r){switch(r.label){case 0:return[4,new Promise(function(t,e){n.device.read(function(n,r){if(n)return e(new Error(n));t(r)})})];case 1:return t=r.sent(),e=new Uint8Array(t).buffer,[2,new DataView(e)]}})})},t.prototype.write=function(t){return i(this,void 0,void 0,function(){var e,n;return o(this,function(r){for(e=function(t){return void 0!==t.buffer}(t)?t.buffer:t,n=Array.prototype.slice.call(new Uint8Array(e));n.length<this.packetSize;)n.push(0);if("win32"===this.os&&n.unshift(0),this.device.write(n)!==n.length)throw new Error("Incorrect bytecount written");return[2]})})},t}(),S=function(){function e(t,e,n,r){void 0===e&&(e=255),void 0===n&&(n=1),void 0===r&&(r=!1),this.device=t,this.interfaceClass=e,this.configuration=n,this.alwaysControlTransfer=r,this.packetSize=64}return e.prototype.bufferToDataView=function(t){var e=new Uint8Array(t).buffer;return new DataView(e)},e.prototype.isView=function(t){return void 0!==t.buffer},e.prototype.bufferSourceToBuffer=function(e){var n=this.isView(e)?e.buffer:e;return t.from(n)},e.prototype.extendBuffer=function(t,e){var n=this.isView(t)?t.buffer:t,r=Math.min(n.byteLength,e),i=new Uint8Array(r);return i.set(new Uint8Array(n)),i},e.prototype.open=function(){return i(this,void 0,void 0,function(){var t,e,n,r,i,s,a=this;return o(this,function(o){switch(o.label){case 0:return this.device.open(),[4,new Promise(function(t,e){a.device.setConfiguration(a.configuration,function(n){n?e(new Error(n)):t()})})];case 1:if(o.sent(),!(t=this.device.interfaces.filter(function(t){return t.descriptor.bInterfaceClass===a.interfaceClass})).length)throw new Error("No valid interfaces found.");if((e=t.find(function(t){return t.endpoints.length>0}))||(e=t[0]),this.interfaceNumber=e.interfaceNumber,!this.alwaysControlTransfer){for(n=e.endpoints,this.endpointIn=void 0,this.endpointOut=void 0,r=0,i=n;r<i.length;r++)"in"!==(s=i[r]).direction||this.endpointIn?"out"!==s.direction||this.endpointOut||(this.endpointOut=s):this.endpointIn=s;if(this.endpointIn||this.endpointOut)try{e.claim()}catch(t){this.endpointIn=void 0,this.endpointOut=void 0}}return[2]}})})},e.prototype.close=function(){return i(this,void 0,void 0,function(){return o(this,function(t){return this.device.close(),[2]})})},e.prototype.read=function(){return i(this,void 0,void 0,function(){var t,e=this;return o(this,function(n){switch(n.label){case 0:if(void 0===this.interfaceNumber)throw new Error("No device opened");return[4,new Promise(function(t,n){e.endpointIn?e.endpointIn.transfer(e.packetSize,function(e,r){e?n(e):t(r)}):e.device.controlTransfer(161,1,256,e.interfaceNumber,e.packetSize,function(e,r){e?n(e):r?t(r):n(new Error("No buffer read"))})})];case 1:return t=n.sent(),[2,this.bufferToDataView(t)]}})})},e.prototype.write=function(t){return i(this,void 0,void 0,function(){var e,n,r=this;return o(this,function(i){switch(i.label){case 0:if(void 0===this.interfaceNumber)throw new Error("No device opened");return e=this.extendBuffer(t,this.packetSize),n=this.bufferSourceToBuffer(e),[4,new Promise(function(t,e){r.endpointOut?r.endpointOut.transfer(n,function(n){if(n)return e(n);t()}):r.device.controlTransfer(33,9,512,r.interfaceNumber,n,function(n){if(n)return e(n);t()})})];case 1:return i.sent(),[2]}})})},e}(),C=function(){function t(t,e,n,r){void 0===e&&(e=255),void 0===n&&(n=1),void 0===r&&(r=!1),this.device=t,this.interfaceClass=e,this.configuration=n,this.alwaysControlTransfer=r,this.packetSize=64}return t.prototype.extendBuffer=function(t,e){var n=void 0!==t.buffer?t.buffer:t,r=Math.min(n.byteLength,e),i=new Uint8Array(r);return i.set(new Uint8Array(n)),i},t.prototype.open=function(){return i(this,void 0,void 0,function(){var t,e,n,r,i,s,a=this;return o(this,function(o){switch(o.label){case 0:return[4,this.device.open()];case 1:return o.sent(),[4,this.device.selectConfiguration(this.configuration)];case 2:if(o.sent(),!(t=this.device.configuration.interfaces.filter(function(t){return t.alternates[0].interfaceClass===a.interfaceClass})).length)throw new Error("No valid interfaces found.");if((e=t.find(function(t){return t.alternates[0].endpoints.length>0}))||(e=t[0]),this.interfaceNumber=e.interfaceNumber,!this.alwaysControlTransfer)for(n=e.alternates[0].endpoints,this.endpointIn=void 0,this.endpointOut=void 0,r=0,i=n;r<i.length;r++)"in"!==(s=i[r]).direction||this.endpointIn?"out"!==s.direction||this.endpointOut||(this.endpointOut=s):this.endpointIn=s;return[2,this.device.claimInterface(this.interfaceNumber)]}})})},t.prototype.close=function(){return this.device.close()},t.prototype.read=function(){return i(this,void 0,void 0,function(){var t;return o(this,function(e){switch(e.label){case 0:if(void 0===this.interfaceNumber)throw new Error("No device opened");return this.endpointIn?[4,this.device.transferIn(this.endpointIn.endpointNumber,this.packetSize)]:[3,2];case 1:return t=e.sent(),[3,4];case 2:return[4,this.device.controlTransferIn({requestType:"class",recipient:"interface",request:1,value:256,index:this.interfaceNumber},this.packetSize)];case 3:t=e.sent(),e.label=4;case 4:return[2,t.data]}})})},t.prototype.write=function(t){return i(this,void 0,void 0,function(){var e;return o(this,function(n){switch(n.label){case 0:if(void 0===this.interfaceNumber)throw new Error("No device opened");return e=this.extendBuffer(t,this.packetSize),this.endpointOut?[4,this.device.transferOut(this.endpointOut.endpointNumber,e)]:[3,2];case 1:return n.sent(),[3,4];case 2:return[4,this.device.controlTransferOut({requestType:"class",recipient:"interface",request:9,value:512,index:this.interfaceNumber},e)];case 3:n.sent(),n.label=4;case 4:return[2]}})})},t}();e.ADI=_,e.CmsisDAP=y,e.CortexM=A,e.DAPLink=m,e.DEFAULT_CLOCK_FREQUENCY=d,e.HID=E,e.USB=S,e.WebUSB=C,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i((r=r||self).DAPjs={})}).call(this)}).call(this,t("buffer").Buffer)},{buffer:2}],4:[function(t,e,n){(function(t){(function(){var r,i;r=this,i=function(){"use strict";function n(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){a(r.response,e,n)},r.onerror=function(){console.error("could not download file")},r.send()}function r(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function i(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(n){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof t&&t.global===t?t:void 0,s=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),a=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(t,e,s){var a=o.URL||o.webkitURL,u=document.createElement("a");e=e||t.name||"download",u.download=e,u.rel="noopener","string"==typeof t?(u.href=t,u.origin===location.origin?i(u):r(u.href)?n(t,e,s):i(u,u.target="_blank")):(u.href=a.createObjectURL(t),setTimeout(function(){a.revokeObjectURL(u.href)},4e4),setTimeout(function(){i(u)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,o){if(e=e||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,o),e);else if(r(t))n(t,e,o);else{var s=document.createElement("a");s.href=t,s.target="_blank",setTimeout(function(){i(s)})}}:function(t,e,r,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof t)return n(t,e,r);var a="application/octet-stream"===t.type,u=/constructor/i.test(o.HTMLElement)||o.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||a&&u||s)&&"undefined"!=typeof FileReader){var l=new FileReader;l.onloadend=function(){var t=l.result;t=c?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=t:location=t,i=null},l.readAsDataURL(t)}else{var h=o.URL||o.webkitURL,f=h.createObjectURL(t);i?i.location=f:location.href=f,i=null,setTimeout(function(){h.revokeObjectURL(f)},4e4)}});o.saveAs=a.saveAs=a,void 0!==e&&(e.exports=a)},"function"==typeof define&&define.amd?define([],i):void 0!==n?i():(i(),r.FileSaver={})}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(t,e,n){n.read=function(t,e,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,l=-7,h=n?i-1:0,f=n?-1:1,p=t[e+h];for(h+=f,o=p&(1<<-l)-1,p>>=-l,l+=a;l>0;o=256*o+t[e+h],h+=f,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+t[e+h],h+=f,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,r),o-=c}return(p?-1:1)*s*Math.pow(2,o-r)},n.write=function(t,e,n,r,i,o){var s,a,u,c=8*o-i-1,l=(1<<c)-1,h=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,v=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+h>=1?f/u:f*Math.pow(2,1-h))*u>=2&&(s++,u/=2),s+h>=l?(a=0,s=l):s+h>=1?(a=(e*u-1)*Math.pow(2,i),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;t[n+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;t[n+p]=255&s,p+=d,s/=256,c-=8);t[n+p-d]|=128*v}},{}],6:[function(t,e,n){"use strict";n.__esModule=!0,n.TwoPanelContainer=void 0;var r=function(){function t(t,e,n){var r=this;this.is_moving=!1,this.left_container=t,this.separator=e,this.right_container=n,this.separator.addEventListener("mousedown",function(){r.is_moving=!0}),document.addEventListener("mouseup",function(){r.is_moving=!1}),document.addEventListener("mousemove",function(t){r.mouse_move(t)})}return t.prototype.mouse_move=function(e){if(this.is_moving){var n=Math.max(t.MIN_SPACE,Math.min(e.clientX,document.body.clientWidth-t.MIN_SPACE));this.set_panel_size(n)}},t.prototype.set_panel_size=function(t){var e=t/document.body.clientWidth*100;this.separator.style.left=e+"%",this.left_container.style.width=e+"%",this.right_container.style.width="calc(".concat(100-e,"% - ").concat(this.separator.clientWidth,"px)")},t.prototype.hide_right_panel=function(){this.right_container.style.display="none",this.separator.style.display="none",this.left_container.style.width="100%"},t.prototype.show_right_panel=function(){this.right_container.style.display="block",this.separator.style.display="block",this.set_panel_size(50)},t.MIN_SPACE=50,t}();n.TwoPanelContainer=r},{}],7:[function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};n.__esModule=!0,n.ActionConnection=void 0;var o=function(){function t(t){var e=this;this.daplink=t,this.is_connected=!1,t.addConnectionChangeListener(function(t){return e.onConnectionChange(t)})}return t.prototype.connect=function(){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,this.daplink.connect()];case 1:return[2,t.sent()]}})})},t.prototype.disconnect=function(){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,this.daplink.disconnect()];case 1:return[2,t.sent()]}})})},t.prototype.run=function(){return r(this,void 0,void 0,function(){return i(this,function(t){return this.is_connected?[2,this.disconnect()]:[2,this.connect()]})})},t.prototype.onConnectionChange=function(t){this.is_connected=t},t}();n.ActionConnection=o},{}],8:[function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};n.__esModule=!0,n.ActionFlash=void 0;var o=t("../microFAT/fat"),s=t("file-saver"),a=t("../ihex_util"),u=t("../progress_dialog"),c=t("../alert_dialog"),l=(function(){}(),function(){function t(t,e,n){this.get_script_cb=n,this.daplink=t,this.serial_ouput=e,this.dialog=new u.ProgressDialog}return t.prototype.run=function(){return r(this,void 0,void 0,function(){var e,n,r=this;return i(this,function(i){switch(i.label){case 0:return this.daplink.isConnected()?(this.dialog.open(),this.dialog.addInfo("Searching for MicroPython..."),[4,this.daplink.isMicropythonOnTarget()]):[3,9];case 1:return i.sent()?(this.dialog.addInfo("MicroPython was found."),this.dialog.addInfo("Flashing python scripts"),[4,this.daplink.flashMain(this.get_script_cb(),function(t){return r.dialog.setProgressValue(100*t)},function(t){r.dialog.addInfo("[FlashMain] Error: "+t,u.ProgressMessageType.ERROR),r.dialog.addInfo("Try unplugging and replugging your board...",u.ProgressMessageType.ERROR)})]):[3,3];case 2:return i.sent(),this.serial_ouput.clear(),this.dialog.showCloseButton(),[3,8];case 3:return this.dialog.addInfo("MicroPython was not found... Reflash everything.",u.ProgressMessageType.WARNING),this.dialog.addInfo("Flashing MicroPython..."),[4,this.generateBinary()];case 4:return null!=(n=i.sent())?[3,5]:(this.dialog.addInfo("Failed to generate binary... Abort"),[3,7]);case 5:return e=new a.IHex(t.FLASH_START_ADDRESS).parseBin(n),[4,this.daplink.flash((new TextEncoder).encode(e),function(t){return r.dialog.setProgressValue(100*t)},function(t){r.dialog.addInfo("[Flash] Error: "+t,u.ProgressMessageType.ERROR),r.dialog.addInfo("Try unplugging and replugging your board...",u.ProgressMessageType.ERROR)})];case 6:i.sent(),i.label=7;case 7:this.dialog.showCloseButton(),i.label=8;case 8:return[3,11];case 9:return[4,this.generateBinary()];case 10:null!=(n=i.sent())&&(0,s.saveAs)(new Blob([new a.IHex(t.FLASH_START_ADDRESS).parseBin(n)]),"flash.hex"),i.label=11;case 11:return[2,!0]}})})},t.prototype.generateBinary=function(){return r(this,void 0,void 0,function(){var t,e,n,s,a,u=this;return i(this,function(l){switch(l.label){case 0:t=new o.FatFS("PYBFLASH"),l.label=1;case 1:return l.trys.push([1,4,,5]),[4,this.readFileAsJSON("assets/fat.json")];case 2:return l.sent().forEach(function(e){return r(u,void 0,void 0,function(){var n,r,o,s,a,u;return i(this,function(i){switch(i.label){case 0:return e.isBinary?(r=(n=t).addBinaryFile,o=[e.name,e.extension],[4,this.readFileAsBinary(e.path)]):[3,2];case 1:return r.apply(n,o.concat([i.sent()])),[3,4];case 2:return a=(s=t).addFile,u=[e.name,e.extension],[4,this.readFileAsText(e.path)];case 3:a.apply(s,u.concat([i.sent()])),i.label=4;case 4:return[2]}})})}),[4,this.readFileAsBinary("assets/micropython_L475_v1.18_PADDED.bin")];case 3:return e=l.sent(),[3,5];case 4:return n=l.sent(),console.error("[GENERATE BINARY]: ",n),new c.AlertDialog("Fatal error",'An error occured during the image generation: <br/><div class="citation-error">'.concat(n.message,"</div><br/>Check your internet connection or restart your browser."),c.AlertDialogIcon.ERROR).open(),[2,null];case 5:return t.addFile("MAIN","PY",this.get_script_cb()),[4,t.generate_binary()];case 6:return s=l.sent(),(a=new Uint8Array(e.byteLength+s.length)).set(new Uint8Array(e),0),a.set(new Uint8Array(s),e.byteLength),console.log("Binary size :  ".concat(a.byteLength," bytes")),[2,a]}})})},t.prototype.readFileAsJSON=function(t){return r(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return[4,this.fetchNoCache(t)];case 1:return[2,e.sent().json()]}})})},t.prototype.readFileAsText=function(t){return r(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return[4,this.fetchNoCache(t)];case 1:return[2,e.sent().text()]}})})},t.prototype.readFileAsBinary=function(t){return r(this,void 0,void 0,function(){var e,n;return i(this,function(r){switch(r.label){case 0:return[4,this.fetchNoCache(t)];case 1:return e=r.sent(),n=Uint8Array.bind,[4,e.arrayBuffer()];case 2:return[2,new(n.apply(Uint8Array,[void 0,r.sent()]))]}})})},t.prototype.fetchNoCache=function(t,e){void 0===e&&(e="GET");var n=new Headers;return n.append("pragma","no-cache"),n.append("cache-control","no-cache"),fetch(t,{method:e,headers:n})},t.FLASH_START_ADDRESS=134217728,t}());n.ActionFlash=l},{"../alert_dialog":13,"../ihex_util":22,"../microFAT/fat":23,"../progress_dialog":28,"file-saver":4}],9:[function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};n.__esModule=!0,n.ActionLoad=void 0;var o=function(){function t(t){var e=this;this.fileReader=new FileReader;var n=document.createElement("div");n.style.display="none",n.style.width="0px",n.style.height="0px",n.style.overflow="hidden",this.file_input=document.createElement("input"),this.file_input.type="file",this.file_input.accept=".py",n.append(this.file_input),this.file_input.addEventListener("input",function(){return e.openFile()}),this.fileReader.onload=function(){return t(e.fileReader.result)},this.fileReader.onerror=function(t){return console.error("Failed to read file.",t)}}return t.prototype.openFile=function(){this.fileReader.readAsText(this.file_input.files[0],"UTF-8")},t.prototype.run=function(){return r(this,void 0,void 0,function(){return i(this,function(t){return this.file_input.click(),[2,!0]})})},t}();n.ActionLoad=o},{}],10:[function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};n.__esModule=!0,n.ActionRun=void 0;var o=t("../progress_dialog"),s=function(){function t(t,e){this.daplink=t,this.getScript_cb=e,this.dialog=new o.ProgressDialog("Running...")}return t.prototype.run=function(){return r(this,void 0,void 0,function(){var t,e=this;return i(this,function(n){switch(n.label){case 0:return t=!1,this.dialog.open(),this.dialog.addInfo("Sending script to target"),[4,this.daplink.runScript(this.getScript_cb(),function(t){return e.dialog.setProgressValue(100*t)},function(n){e.dialog.addInfo(n,o.ProgressMessageType.ERROR),t=!0})];case 1:return n.sent(),t?this.dialog.showCloseButton():this.dialog.close(),[2,!0]}})})},t}();n.ActionRun=s},{"../progress_dialog":28}],11:[function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};n.__esModule=!0,n.ActionSave=void 0;var o=t("file-saver"),s=function(){function t(t){this.cb_getScript=t}return t.prototype.saveFile=function(t){var e=new Blob([this.cb_getScript()],{type:"text/plain;charset=utf-8"});(0,o.saveAs)(e,t)},t.prototype.run=function(){return r(this,void 0,void 0,function(){return i(this,function(t){return this.saveFile("main.py"),[2,!0]})})},t}();n.ActionSave=s},{"file-saver":4}],12:[function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};n.__esModule=!0,n.ActionSettings=void 0;var o=function(){function t(){}return t.prototype.run=function(){return r(this,void 0,void 0,function(){return i(this,function(t){return[2,!0]})})},t}();n.ActionSettings=o},{}],13:[function(t,e,n){"use strict";var r;n.__esModule=!0,n.AlertDialog=n.AlertDialogIcon=void 0,function(t){t.NONE="alert-dialog-icon-none",t.INFO="alert-dialog-icon-info",t.WARNING="alert-dialog-icon-warning",t.ERROR="alert-dialog-icon-error"}(r=n.AlertDialogIcon||(n.AlertDialogIcon={}));var i=function(){function t(t,e,n){void 0===n&&(n=r.NONE);var i=this;this.dialog=document.createElement("div"),this.dialog.classList.add("alert-dialog"),this.dialog.style.display="none";var o=document.createElement("div");o.classList.add("alert-dialog-container");var s=document.createElement("div");s.classList.add("alert-dialog-title",n),s.innerText=t||"";var a=document.createElement("div");a.classList.add("alert-dialog-content");var u=document.createElement("p");u.innerHTML=e||"";var c=document.createElement("button");c.classList.add("alert-dialog-close-button"),c.innerText="Close",c.addEventListener("click",function(){return i.close()}),a.append(u),a.append(c),o.append(s),o.append(a),this.dialog.append(o),document.body.append(this.dialog)}return t.prototype.open=function(t,e,n){if(t&&(this.dialog.querySelector(".alert-dialog-title").innerHTML=t),e&&(this.dialog.querySelector(".alert-dialog-content p").innerHTML=e),n){var i=this.dialog.querySelector(".alert-dialog-title");i.classList.remove(r.NONE,r.INFO,r.WARNING,r.ERROR),i.classList.add(n)}this.dialog.style.display="block"},t.prototype.close=function(){this.dialog.style.display="none"},t}();n.AlertDialog=i},{}],14:[function(t,e,n){"use strict";n.__esModule=!0,n.Application=void 0;var r=t("./button/button"),i=t("./actions/action_connection"),o=t("./daplink"),s=t("./actions/action_run"),a=t("./serialOutput"),u=t("./TwoPanelContainer"),c=t("./actions/action_save"),l=t("./actions/action_load"),h=t("./actions/action_flash"),f=t("./button/button_toggle"),p=t("./actions/action_settings"),d=t("./button/buttonSpacer"),v=t("./button/button_placeholder"),y=t("./button/button_dropdown"),g=t("./alert_dialog"),b=t("./version"),w=function(){function t(t,e){var n,r=this;this.top_container=document.getElementById("top_container"),this.left_container=document.getElementById("left_container"),this.right_container=document.getElementById("right_container"),this.spacer_container=document.getElementById("spacer_container"),this.dapLinkWrapper=new o.DapLinkWrapper,this.serial_output=new a.SerialOutput(this.right_container),this.dapLinkWrapper.addReiceivedDataListener(function(t){return r.serial_output.write(t)}),this.dapLinkWrapper.addConnectionChangeListener(function(t){return r.onConnectionChange(t)}),this.topMenu(t,e),null===(n=this.button_run)||void 0===n||n.disable(),this.dapLinkWrapper.isWebUSBAvailable()?new u.TwoPanelContainer(this.left_container,this.spacer_container,this.right_container).set_panel_size(.66*document.body.clientWidth):new u.TwoPanelContainer(this.left_container,this.spacer_container,this.right_container).hide_right_panel()}return t.prototype.topMenu=function(t,e){var n=this,o=new i.ActionConnection(this.dapLinkWrapper),a=new s.ActionRun(this.dapLinkWrapper,t),u=new h.ActionFlash(this.dapLinkWrapper,this.serial_output,t),g=new l.ActionLoad(e),b=new c.ActionSave(t);new p.ActionSettings;this.dapLinkWrapper.isWebUSBAvailable()?(this.button_conn=new f.ToggleButton(this.top_container,"img/disconnect.png","img/connect.png",o,"Click to connect","Click to disconnect"),this.button_run=new r.Button(this.top_container,"img/play.png",a,"Run script on target")):(new v.PlaceHolderButton(this.top_container),new v.PlaceHolderButton(this.top_container)),new r.Button(this.top_container,"img/flash.png",u,"Flash or Download"),new d.ButtonSpacer(this.top_container),new r.Button(this.top_container,"img/upload.png",g,"Load python file"),new r.Button(this.top_container,"img/download.png",b,"Save python file"),new d.ButtonSpacer(this.top_container),new y.ButtonDropdown(this.top_container,"img/settings.png",[new y.ButtonDropdownElement("Clear console",function(){n.serial_output.clear()},"f120"),new y.ButtonDropdownElement("Force task stop",function(){n.dapLinkWrapper.sendKeyboardInterrupt()},"f54c"),new y.ButtonDropdownElement("About",function(){return n.about()},"f059")],"Settings")},t.prototype.onConnectionChange=function(t){var e,n,r,i;t?(null===(e=this.button_run)||void 0===e||e.enable(),null===(n=this.button_conn)||void 0===n||n.setButtonState(!1)):(null===(r=this.button_run)||void 0===r||r.disable(),null===(i=this.button_conn)||void 0===i||i.setButtonState(!0))},t.prototype.about=function(){new g.AlertDialog("About","Version: ".concat(b.APP_VERSION),g.AlertDialogIcon.INFO).open()},t}();n.Application=w,window.Application=w,window.AlertDialog=g.AlertDialog,window.AlertDialogIcon=g.AlertDialogIcon},{"./TwoPanelContainer":6,"./actions/action_connection":7,"./actions/action_flash":8,"./actions/action_load":9,"./actions/action_run":10,"./actions/action_save":11,"./actions/action_settings":12,"./alert_dialog":13,"./button/button":15,"./button/buttonSpacer":16,"./button/button_dropdown":17,"./button/button_placeholder":18,"./button/button_toggle":19,"./daplink":21,"./serialOutput":29,"./version":30}],15:[function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};n.__esModule=!0,n.Button=void 0;var o=function(){function t(t,e,n,r){void 0===r&&(r="");var i=this;this.button=document.createElement("div"),this.icon=document.createElement("img"),this.button.classList.add("menu_button"),this.button.title=r,this.action=n,this.is_enable=!0,this.icon.src=e,this.button.append(this.icon),t.append(this.button),this.button.addEventListener("click",function(){return i.onButtonClick()})}return t.prototype.enable=function(){this.button.classList.remove("disable")},t.prototype.disable=function(){this.button.classList.add("disable")},t.prototype.isEnable=function(){return this.is_enable},t.prototype.onButtonClick=function(){return r(this,void 0,void 0,function(){return i(this,function(t){return this.is_enable&&this.action.run(),[2]})})},t}();n.Button=o},{}],16:[function(t,e,n){"use strict";n.__esModule=!0,n.ButtonSpacer=void 0;var r=function(){return function(t){var e=document.createElement("div");e.classList.add("menu_button_space"),t.append(e)}}();n.ButtonSpacer=r},{}],17:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};n.__esModule=!0,n.ButtonDropdown=n.ButtonDropdownElement=void 0;var a=t("./button"),u=function(){return function(t,e,n){this.name=t,this.fct=e,this.icon=n}}();n.ButtonDropdownElement=u;var c=function(t){function e(e,n,r,i){void 0===i&&(i="");var a=this,u={run:function(){return o(a,void 0,void 0,function(){return s(this,function(t){return[2,this.internalAction()]})})}},c=(a=t.call(this,e,n,u,i)||this).button.getBoundingClientRect();return a.dropdown=document.createElement("div"),a.dropdown.classList.add("menu_button_dropdown"),a.dropdown.style.display="none",a.dropdown.style.top=c.top+4+c.height+"px",a.dropdown.style.left=c.left+"px",a.populateDorpdown(r),document.body.append(a.dropdown),document.body.addEventListener("mousedown",function(t){return a.click_outside(t)}),a}return i(e,t),e.prototype.internalAction=function(){return"none"==this.dropdown.style.display?this.dropdown.style.display="block":this.dropdown.style.display="none",!0},e.prototype.click_outside=function(t){var e=this;-1==t.path.findIndex(function(t){return t==e.button||t==e.dropdown})&&this.close()},e.prototype.populateDorpdown=function(t){var e=this;t.forEach(function(t){var n=document.createElement("p");t.icon&&(n.innerHTML='<span class="fa">&#x'.concat(t.icon,";</span>")),n.innerHTML+=t.name,n.addEventListener("click",function(){e.close(),t.fct()}),e.dropdown.append(n)})},e.prototype.close=function(){this.dropdown.style.display="none"},e}(a.Button);n.ButtonDropdown=c},{"./button":15}],18:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};n.__esModule=!0,n.PlaceHolderButton=void 0;var a=function(t){function e(e){var n=t.call(this,e,"",{run:function(){return o(n,void 0,void 0,function(){return s(this,function(t){return[2,!0]})})}})||this;return n.button.style.display="none",n.button.style.width="0",n.button.style.height="0",n}return i(e,t),e}(t("./button").Button);n.PlaceHolderButton=a},{"./button":15}],19:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};n.__esModule=!0,n.ToggleButton=void 0;var a=function(t){function e(e,n,r,i,o,s){void 0===o&&(o=""),void 0===s&&(s="");var a=t.call(this,e,n,i)||this;return a.lock_button_state=!1,a.is_A_show=!0,a.iconA=n,a.iconB=r,a.titleA=o,a.titleB=s,a}return i(e,t),e.prototype.setButtonState=function(t){this.lock_button_state||this.internal_setButtonState(t)},e.prototype.onButtonClick=function(){return o(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return this.is_enable?(this.lock_button_state=!0,[4,this.action.run()]):[2];case 1:return t.sent()&&this.internal_setButtonState(!this.is_A_show),this.lock_button_state=!1,[2]}})})},e.prototype.internal_setButtonState=function(t){t?(this.button.title=this.titleA,this.icon.src=this.iconA):(this.button.title=this.titleB,this.icon.src=this.iconB),this.is_A_show=t},e}(t("./button").Button);n.ToggleButton=a},{"./button":15}],20:[function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};function o(t,e){var n=t.toString(16).toUpperCase();return n.length>e&&console.warn("[TRUNCATE WARN] : Need to represent ".concat(n," on ").concat(e," digits...")),"0".repeat(Math.max(0,e-n.length))+n}n.__esModule=!0,n.wait=n.toHexString=n.print_hex_data=void 0,n.print_hex_data=function(t){var e="";t.forEach(function(t,n){e+=o(t,2),(n+1)%4==0&&(e+=" ")}),console.log(e)},n.toHexString=o,n.wait=function(t){return r(this,void 0,void 0,function(){return i(this,function(e){return[2,new Promise(function(e){setTimeout(function(){return e()},t)})]})})}},{}],21:[function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};n.__esModule=!0,n.DapLinkWrapper=void 0;var o=t("dapjs"),s=t("./alert_dialog"),a=t("./common"),u=function(){function t(){var t=this;this.device=void 0,this.transport=void 0,this.target=void 0,this.cb_onReceiveData=[],this.serial_buffer="",this.onConnectionChange_cb=[],navigator.usb?(navigator.usb.addEventListener("disconnect",function(e){var n;t.isConnected()&&(null===(n=t.device)||void 0===n?void 0:n.serialNumber)==e.device.serialNumber&&t.disconnect()}),this.is_webusb_available=!0):this.is_webusb_available=!1}return t.prototype.isWebUSBAvailable=function(){return this.is_webusb_available},t.prototype.addReiceivedDataListener=function(t){this.cb_onReceiveData.push(t)},t.prototype.connect=function(){var e,n;return r(this,void 0,void 0,function(){var r;return i(this,function(i){switch(i.label){case 0:return this.isConnected()?[3,3]:(r=!this.is_webusb_available)?[3,2]:[4,this.createTarget()];case 1:r=!i.sent(),i.label=2;case 2:if(r)return[2,!1];i.label=3;case 3:return[4,null===(e=this.target)||void 0===e?void 0:e.serialWrite(String.fromCharCode(1))];case 4:return i.sent(),null===(n=this.target)||void 0===n||n.startSerialRead(t.SERIAL_DELAY_MS,!0),this.callOnConnectionChangeCallbacks(!0),[2,!0]}})})},t.prototype.disconnect=function(){var t,e;return r(this,void 0,void 0,function(){return i(this,function(n){switch(n.label){case 0:if(!this.isConnected())return[2,!1];null===(t=this.target)||void 0===t||t.stopSerialRead(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,null===(e=this.target)||void 0===e?void 0:e.disconnect()];case 2:return n.sent(),[3,4];case 3:return n.sent(),[3,4];case 4:return this.target=void 0,this.transport=void 0,this.device=void 0,this.flushSerial(),this.callOnConnectionChangeCallbacks(!1),[2,!0]}})})},t.prototype.runScript=function(t,e,n){return r(this,void 0,void 0,function(){return i(this,function(r){switch(r.label){case 0:return[4,this.connect()];case 1:return r.sent()?[4,this.sendScript(t+"\n\n\n",e,n)]:[2];case 2:return r.sent(),[2]}})})},t.prototype.flashMain=function(t,e,n){var o,s;return r(this,void 0,void 0,function(){var r,a,u,c,l;return i(this,function(i){switch(i.label){case 0:for(r=(new TextEncoder).encode(t),a="prog=[",40,u=Math.ceil(r.length/40),e(0),c=0;c<u;++c)a+=r.slice(40*c,40*(c+1)).join(","),a+=",\n";return l=(a+="]\n")+'with open("main.py", "wb") as f:\n\tf.write(bytearray(prog))\n\n',[4,this.sendScript(l,e,n)];case 1:return i.sent(),[4,null===(o=this.target)||void 0===o?void 0:o.serialWrite(String.fromCharCode(2))];case 2:return i.sent(),[4,null===(s=this.target)||void 0===s?void 0:s.serialWrite(String.fromCharCode(4))];case 3:return i.sent(),e(1),[2]}})})},t.prototype.isConnected=function(){return null!=this.target&&this.target.connected},t.prototype.flash=function(t,e,n){var s,u,c,l,h,f;return r(this,void 0,void 0,function(){var r;return i(this,function(i){switch(i.label){case 0:if(!this.isConnected())return[2];null===(s=this.target)||void 0===s||s.on(o.DAPLink.EVENT_PROGRESS,function(t){return e(t)}),i.label=1;case 1:return i.trys.push([1,7,,8]),[4,null===(u=this.target)||void 0===u?void 0:u.stopSerialRead()];case 2:return i.sent(),[4,null===(c=this.target)||void 0===c?void 0:c.reset()];case 3:return i.sent(),[4,null===(l=this.target)||void 0===l?void 0:l.flash(t)];case 4:return i.sent(),[4,(0,a.wait)(1e3)];case 5:return i.sent(),[4,null===(h=this.target)||void 0===h?void 0:h.reset()];case 6:return i.sent(),[3,8];case 7:return r=i.sent(),console.warn("[FLASH]: ",r),n(r.message),[3,8];case 8:return null===(f=this.target)||void 0===f||f.on(o.DAPLink.EVENT_PROGRESS,function(t){}),[2]}})})},t.prototype.isMicropythonOnTarget=function(){var e,n,o,s,u;return r(this,void 0,void 0,function(){var r,c,l,h,f,p;return i(this,function(i){switch(i.label){case 0:if(!this.isConnected())return[2];i.label=1;case 1:return i.trys.push([1,10,,11]),null===(e=this.target)||void 0===e||e.stopSerialRead(),[4,null===(n=this.target)||void 0===n?void 0:n.serialWrite(String.fromCharCode(3))];case 2:return i.sent(),[4,(0,a.wait)(2e3)];case 3:return i.sent(),[4,null===(o=this.target)||void 0===o?void 0:o.serialWrite(String.fromCharCode(4))];case 4:i.sent(),r="",c=0,i.label=5;case 5:return c<10?(l=r,f=(h=new TextDecoder).decode,[4,null===(s=this.target)||void 0===s?void 0:s.serialRead()]):[3,9];case 6:return r=l+f.apply(h,[i.sent()]),[4,(0,a.wait)(100)];case 7:i.sent(),i.label=8;case 8:return c++,[3,5];case 9:return null===(u=this.target)||void 0===u||u.startSerialRead(t.SERIAL_DELAY_MS,!0),[2,-1!=r.indexOf("MPY")];case 10:return p=i.sent(),console.error("[IS_MICROPYTHON_ON_TARGET]: ",p),[2,!1];case 11:return[2]}})})},t.prototype.addConnectionChangeListener=function(t){this.onConnectionChange_cb.push(t)},t.prototype.sendKeyboardInterrupt=function(){var t;return r(this,void 0,void 0,function(){var e;return i(this,function(n){switch(n.label){case 0:if(!this.isConnected())return[2];n.label=1;case 1:return n.trys.push([1,4,,5]),[4,null===(t=this.target)||void 0===t?void 0:t.serialWrite(String.fromCharCode(3))];case 2:return n.sent(),[4,(0,a.wait)(1e3)];case 3:return n.sent(),[3,5];case 4:return e=n.sent(),console.error("[SEND_KEYBOARD_INTERRUPT]: ",e),[2,!1];case 5:return[2]}})})},t.prototype.callOnConnectionChangeCallbacks=function(t){this.onConnectionChange_cb.forEach(function(e){return e(t)})},t.prototype.sendScript=function(e,n,o){var s,u,c,l,h,f,p,d;return r(this,void 0,void 0,function(){var r,v,y,g;return i(this,function(i){switch(i.label){case 0:if(!this.isConnected())return[2];if(0==e.length)return[2];r="def __send_script_execution__():\n\t"+e.replace(/\n/g,"\n\t")+"\n\n",v=r.match(new RegExp("[\\s\\S]{1,"+t.LENGTH_SERIAL_BUFFER+"}","g"))||[],i.label=1;case 1:return i.trys.push([1,16,,17]),[4,null===(s=this.target)||void 0===s?void 0:s.serialWrite(String.fromCharCode(3))];case 2:return i.sent(),[4,(0,a.wait)(2e3)];case 3:return i.sent(),this.flushSerial(),[4,null===(u=this.target)||void 0===u?void 0:u.serialWrite(String.fromCharCode(1))];case 4:return i.sent(),[4,(0,a.wait)(250)];case 5:i.sent(),y=0,i.label=6;case 6:return y<v.length?[4,null===(c=this.target)||void 0===c?void 0:c.serialWrite(v[y])]:[3,10];case 7:return i.sent(),[4,(0,a.wait)(10)];case 8:i.sent(),null!=n&&n(y/v.length),i.label=9;case 9:return++y,[3,6];case 10:return[4,null===(l=this.target)||void 0===l?void 0:l.serialWrite("try:\n")];case 11:return i.sent(),[4,null===(h=this.target)||void 0===h?void 0:h.serialWrite("\t__send_script_execution__()\n")];case 12:return i.sent(),[4,null===(f=this.target)||void 0===f?void 0:f.serialWrite("except KeyboardInterrupt:\n")];case 13:return i.sent(),[4,null===(p=this.target)||void 0===p?void 0:p.serialWrite('\tprint("--INTERRUPT RUNNING PROGRAM--")\n\n')];case 14:return i.sent(),[4,null===(d=this.target)||void 0===d?void 0:d.serialWrite(String.fromCharCode(4))];case 15:return i.sent(),[3,17];case 16:return g=i.sent(),console.warn("[SEND SCRIPT]: ",g),o&&o(g.message),[3,17];case 17:return[2]}})})},t.prototype.createTarget=function(){return r(this,void 0,void 0,function(){var t,e,n,r=this;return i(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),t=this,[4,navigator.usb.requestDevice({filters:[{vendorId:3368}]})];case 1:return t.device=i.sent(),[3,3];case 2:return e=i.sent(),console.warn(e),-1==e.message.indexOf("No device selected")&&new s.AlertDialog("WebUSB Error",'An error occured with the WebUSB: <br/><div class="citation-error">'.concat(e.message,"</div><br/>Try unplugging and replugging your board or restart your browser.<br/><br/><i>Note: WebUSB is experimental and only support on chrome based browser (chrome, chromium, brave, edge, etc)</i>"),s.AlertDialogIcon.ERROR).open(),[2,!1];case 3:this.transport=new o.WebUSB(this.device),this.target=new o.DAPLink(this.transport),this.target.on(o.DAPLink.EVENT_SERIAL_DATA,function(t){return r.onEventSerialData(t)}),i.label=4;case 4:return i.trys.push([4,7,,8]),[4,this.target.connect()];case 5:return i.sent(),[4,this.target.setSerialBaudrate(115200)];case 6:return i.sent(),[3,8];case 7:return n=i.sent(),console.warn(n),new s.AlertDialog("Connection failed",'An error occured during the connection: <br/><div class="citation-error">'.concat(n.message,"</div><br/>Try unplugging and replugging your board..."),s.AlertDialogIcon.ERROR).open(),[2,!1];case 8:return[2,!0]}})})},t.prototype.flushSerial=function(){this.serial_buffer.length>0&&(this.serial_buffer="")},t.prototype.onEventSerialData=function(t){var e=this;t.split(/(?<=\n)/).forEach(function(t){e.serial_buffer+=t,"\n"==t.at(-1)&&(e.callOnReceiveCallbacks(e.cleanString(e.serial_buffer)),e.serial_buffer="")})},t.prototype.callOnReceiveCallbacks=function(t){this.cb_onReceiveData.forEach(function(e){e(t)})},t.prototype.cleanString=function(t){return t.replace(/\x04\x04/g,"").replace(/\>OK[\x04\>]*/g,"").replace(/\>\>\>[ \r\n]*/g,"").replace(/[\>\r\n]*raw REPL; CTRL-B to exit[\r\n]*/g,"").replace(/Type "help\(\)" for more information.[\r\n]*/g,"").replace(/MicroPython [\s\S]*\n$/g,"")},t.LENGTH_SERIAL_BUFFER=30,t.SERIAL_DELAY_MS=10,t}();n.DapLinkWrapper=u},{"./alert_dialog":13,"./common":20,dapjs:3}],22:[function(t,e,n){"use strict";n.__esModule=!0,n.IHex=void 0;var r=function(){function t(t){this.base_address=t}return t.prototype.parseBin=function(t){for(var e=this,n=this.addressLine(this.base_address),r=Math.ceil(t.length/16),i=0,o="",s=function(r){var s=16,u=t.slice(16*r,16*(r+1)),c=16*r,l=":".concat(a.toHexString(u.length,2));c-i>65535&&(i+=65536,o=a.addressLine(a.base_address+i)),l+=a.toHexString(c-i,4),s+=(c-i&65280)>>8,s+=c-i&255,l+="00",s+=0;var h=!0;if(u.forEach(function(t){l+=e.toHexString(t,2),s+=t,255!=t&&(h=!1)}),h&&i<2155872256)return"continue";l+=a.computeCRC(s),o.length>0&&(n+=o,o=""),n+="".concat(l,"\n")},a=this,u=0;u<r;u++)s(u);return n+=":00000001FF\n",console.log("iHex size :  ".concat(n.length," bytes")),n},t.prototype.offsetLine=function(t){var e=(4294901760&t)>>4;return":02000002".concat(this.toHexString(e,4)).concat(this.computeCRC(4+((65280&e)>>8)+(255&e)),"\n")},t.prototype.addressLine=function(t){var e=(4294901760&t)>>16;return":02000004".concat(this.toHexString(e,4)).concat(this.computeCRC(6+((65280&e)>>8)+(255&e)),"\n")},t.prototype.computeCRC=function(t){return this.toHexString(1+~(255&t)&255,2)},t.prototype.toHexString=function(t,e){var n=t.toString(16).toUpperCase();return n.length>e&&console.warn("[TRUNCATE WARN] : Need to represent ".concat(n," on ").concat(e," digits...")),"0".repeat(Math.max(0,e-n.length))+n},t}();n.IHex=r},{}],23:[function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};n.__esModule=!0,n.FatFS=void 0;var o=t("./fat_BPB"),s=t("./fat_rootDir"),a=t("./fat_table"),u=function(){function t(t){this.BPB=new o.FatBPB,this.construct_pbp(),this.table=new a.FatTable(this.BPB),this.root=new s.FatRootDirectory(this.BPB,this.table,t)}return t.prototype.construct_pbp=function(){this.BPB.jump_inst=9502443,this.BPB.oem_name="MSDOS5.0",this.BPB.sector_size=512,this.BPB.cluster_size=1,this.BPB.reserved_sectors=1,this.BPB.fats_number=1,this.BPB.root_dir_size=512,this.BPB.total_sectors=1024,this.BPB.disk_type=248,this.BPB.fat_size=4,this.BPB.sectors_per_track=63,this.BPB.heads_number=255,this.BPB.hidden_sectors=256,this.BPB.total_32bits_sectors=0,this.BPB.disk_identifier=128,this.BPB.signature=41,this.BPB.disk_serial=1176567808,this.BPB.disk_name="NO NAME",this.BPB.file_system_type="FAT",this.BPB.physical_drive_number=0,this.BPB.boot_sector_signature=43605},t.prototype.addFile=function(t,e,n){var r=new TextEncoder;this.root.addFile(t,e,s.FileAttribute.ARCHIVE,r.encode(n))},t.prototype.addBinaryFile=function(t,e,n){this.root.addFile(t,e,s.FileAttribute.ARCHIVE,n)},t.prototype.generate_binary=function(){return r(this,void 0,void 0,function(){var t,e;return i(this,function(n){switch(n.label){case 0:return e=(t=this.BPB.generateBPB().concat(this.table.generateTable())).concat,[4,this.root.generateRootDirectory()];case 1:return[2,e.apply(t,[n.sent()])]}})})},t}();n.FatFS=u},{"./fat_BPB":24,"./fat_rootDir":26,"./fat_table":27}],24:[function(t,e,n){"use strict";n.__esModule=!0,n.FatBPB=void 0;var r=t("./fat_common"),i=function(){function t(){this.jump_inst=0,this.oem_name="",this.sector_size=0,this.cluster_size=0,this.reserved_sectors=0,this.fats_number=0,this.root_dir_size=0,this.total_sectors=0,this.disk_type=0,this.fat_size=0,this.sectors_per_track=0,this.heads_number=0,this.hidden_sectors=0,this.total_32bits_sectors=0,this.disk_identifier=0,this.signature=0,this.disk_serial=0,this.disk_name="",this.file_system_type="",this.physical_drive_number=0,this.boot_sector_signature=0}return t.prototype.generateBPB=function(){return r.FatUtils.convertToHex(this.jump_inst,3).concat(r.FatUtils.convertString(this.oem_name,8)).concat(r.FatUtils.convertToHex(this.sector_size,2)).concat(r.FatUtils.convertToHex(this.cluster_size,1)).concat(r.FatUtils.convertToHex(this.reserved_sectors,2)).concat(r.FatUtils.convertToHex(this.fats_number,1)).concat(r.FatUtils.convertToHex(this.root_dir_size,2)).concat(r.FatUtils.convertToHex(this.total_sectors,2)).concat(r.FatUtils.convertToHex(this.disk_type,1)).concat(r.FatUtils.convertToHex(this.fat_size,2)).concat(r.FatUtils.convertToHex(this.sectors_per_track,2)).concat(r.FatUtils.convertToHex(this.heads_number,2)).concat(r.FatUtils.convertToHex(this.hidden_sectors,4)).concat(r.FatUtils.convertToHex(this.total_32bits_sectors,4)).concat(r.FatUtils.convertToHex(this.disk_identifier,1)).concat([1]).concat(r.FatUtils.convertToHex(this.signature,1)).concat(r.FatUtils.convertToHex(this.disk_serial,4)).concat(r.FatUtils.convertString(this.disk_name,11)).concat(r.FatUtils.convertString(this.file_system_type,8)).concat(r.FatUtils.convertToHex(0,447)).concat(r.FatUtils.convertToHex(this.physical_drive_number,1)).concat(r.FatUtils.convertToHex(this.boot_sector_signature,2))},t}();n.FatBPB=i},{"./fat_common":25}],25:[function(t,e,n){"use strict";n.__esModule=!0,n.FatUtils=void 0;var r=function(){function t(){}return t.convertString=function(t,e){for(var n=[],r=0;r<e;++r)n[r]=r>=t.length?32:t.charCodeAt(r);return n},t.convertToHex=function(t,e){for(var n=[],r=0;r<e;++r){var i=8*r;n[r]=t>>i&255}return n},t}();n.FatUtils=r},{}],26:[function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};n.__esModule=!0,n.FatRootDirectory=n.FileAttribute=void 0;var o,s=t("../common"),a=t("./fat_common"),u=t("./fat_table"),c=function(){function t(t){this.data=new Uint8Array(t),this.erase()}return t.prototype.erase=function(){this.data.fill(255)},t.prototype.set=function(t){for(var e=0;e<this.data.length;e++)this.data[e]=e>=t.length?0:t[e]},t}(),l=function(){function t(){this.filename="",this.extension="",this.attribute=0,this.create_ms=0,this.create_time=0,this.create_date=0,this.last_access_date=0,this.modification_time=0,this.modification_date=0,this.cluster_number=0,this.file_size=0}return t.prototype.generate_file=function(){return a.FatUtils.convertString(this.filename,8).concat(a.FatUtils.convertString(this.extension,3)).concat(a.FatUtils.convertToHex(this.attribute,1)).concat([0]).concat(a.FatUtils.convertToHex(Math.floor(this.create_ms/10),1)).concat(a.FatUtils.convertToHex(this.create_time,2)).concat(a.FatUtils.convertToHex(this.create_date,2)).concat(a.FatUtils.convertToHex(this.last_access_date,2)).concat([0,0]).concat(a.FatUtils.convertToHex(this.modification_time,2)).concat(a.FatUtils.convertToHex(this.modification_date,2)).concat(a.FatUtils.convertToHex(this.cluster_number,2)).concat(a.FatUtils.convertToHex(this.file_size,4))},t}();!function(t){t[t.READONLY=1]="READONLY",t[t.HIDDEN=2]="HIDDEN",t[t.SYSTEM=3]="SYSTEM",t[t.VOLUME_NAME=8]="VOLUME_NAME",t[t.SUBDIRECTORY=16]="SUBDIRECTORY",t[t.ARCHIVE=32]="ARCHIVE",t[t.DEVICE=64]="DEVICE",t[t.RESERVED=128]="RESERVED"}(o=n.FileAttribute||(n.FileAttribute={}));var h=function(){function t(t,e,n){this.sector_size=t.sector_size,this.fat_table=e,this.files=new Array(t.root_dir_size),this.sectors=new Array(Math.floor((t.total_sectors*t.sector_size-512-e.getSize()-32*t.root_dir_size)/t.sector_size));for(var r=0;r<this.files.length;++r)this.files[r]=null;for(r=0;r<this.sectors.length;++r)this.sectors[r]=new c(this.sector_size);var i=new l;i.filename=n,i.attribute=o.VOLUME_NAME,this.files[0]=i,this.biggest_cluster_use=0}return t.prototype.addFile=function(t,e,n,r){var i=new l,o=new Date,s=Math.ceil(r.length/this.sector_size);i.filename=t,i.extension=e,i.attribute=n,i.create_ms=o.getMilliseconds(),i.create_time=this.timeField(o),i.create_date=this.dateField(o),i.last_access_date=this.dateField(o),i.modification_time=this.timeField(o),i.modification_date=this.dateField(o),i.cluster_number=this.fat_table.find_free_cluster(),i.file_size=r.length;for(var a=i.cluster_number,c=0,h=0;h<s;h++)(c=a)>this.biggest_cluster_use&&(this.biggest_cluster_use=c),this.sectors[c-2].set(r.slice(h*this.sector_size,h*this.sector_size+this.sector_size)),a=this.fat_table.find_free_cluster(c),this.fat_table.set_next_cluster(c,a);this.fat_table.set_next_cluster(c,u.FatTable.END_OF_FILE),this.files[this.getAvailableFileIndex()]=i},t.prototype.generateRootDirectory=function(){return r(this,void 0,void 0,function(){var e,n;return i(this,function(r){switch(r.label){case 0:e=[],this.files.forEach(function(n){e=null==n?e.concat(t.FILE_NOT_SET):e.concat(n.generate_file())}),n=0,r.label=1;case 1:return n<this.sectors.length&&n<this.biggest_cluster_use?(e=e.concat(Array.from(this.sectors[n].data)),[4,(0,s.wait)(5)]):[3,4];case 2:r.sent(),r.label=3;case 3:return++n,[3,1];case 4:return[2,e]}})})},t.prototype.getAvailableFileIndex=function(){for(var t=0;t<this.files.length;++t)if(null==this.files[t])return t;return-1},t.prototype.dateField=function(t){var e=0;return e=(127&t.getFullYear())<<9,e+=(15&t.getMonth())<<5,e+=31&t.getDay()},t.prototype.timeField=function(t){var e=0;return e=(31&t.getHours())<<11,e+=(63&t.getMinutes())<<5,e+=31&Math.floor(t.getSeconds()/2)},t.FILE_NOT_SET=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t}();n.FatRootDirectory=h},{"../common":20,"./fat_common":25,"./fat_table":27}],27:[function(t,e,n){"use strict";n.__esModule=!0,n.FatTable=void 0;var r=function(){function t(t){this.size=Math.floor(t.fat_size*t.sector_size/1.5),this.table=new Uint16Array(this.size),this.table[0]=3840|t.disk_type,this.table[1]=4095;for(var e=2;e<this.table.length;++e)this.table[e]=0}return t.prototype.set_next_cluster=function(e,n){e>=this.table.length||(this.table[e]=n>=this.table.length&&n!=t.END_OF_FILE?t.BAD_CLUSTER:4095&n)},t.prototype.find_free_cluster=function(t){void 0===t&&(t=-1);for(var e=2;e<this.table.length;++e)if(0==this.table[e]&&e!=t)return e;return-1},t.prototype.generateTable=function(){for(var t=[],e=0;e<this.table.length;e+=2){var n=0;n=(4095&this.table[e])<<12,n|=4095&this.table[e+1],t.push((1044480&n)>>12),t.push((15728640&n)>>20|(15&n)<<4),t.push((4080&n)>>4)}return t.pop(),t},t.prototype.getSize=function(){return this.size},t.END_OF_FILE=4095,t.BAD_CLUSTER=4087,t}();n.FatTable=r},{}],28:[function(t,e,n){"use strict";var r;n.__esModule=!0,n.ProgressDialog=n.ProgressMessageType=void 0,function(t){t.INFO="info",t.WARNING="warning",t.ERROR="error"}(r=n.ProgressMessageType||(n.ProgressMessageType={}));var i=function(){function t(t,e){void 0===t&&(t="Uploading..."),void 0===e&&(e="Your program is uploading to your target, please wait.<br/><br/><i>Do not unplugged your board, do not close this tab nor change tab during uploading.</i>");var n=this;this.dialog=document.createElement("div"),this.dialog.classList.add("progress-dialog"),this.dialog.style.display="none";var r=document.createElement("div");r.classList.add("progress-dialog-container");var i=document.createElement("div");i.classList.add("progress-dialog-title"),i.innerText=t;var o=document.createElement("div");o.classList.add("progress-dialog-content");var s=document.createElement("p");s.innerHTML=e;var a=document.createElement("button");a.classList.add("progress-dialog-close-button"),a.innerText="Close",a.addEventListener("click",function(){return n.close()}),this.progress_bar_div=document.createElement("div"),this.progress_bar_div.classList.add("progress-dialog-bar-container");var u=document.createElement("p");u.classList.add("progress-dialog-bar-value");var c=document.createElement("div");c.classList.add("progress-dialog-bar-cursor"),this.progress_bar_div.append(u),this.progress_bar_div.append(c);var l=document.createElement("div");l.classList.add("progress-dialog-infos"),o.append(s),o.append(this.progress_bar_div),o.append("Status:"),o.append(l),o.append(a),r.append(i),r.append(o),this.dialog.append(r),document.body.append(this.dialog)}return t.prototype.showCloseButton=function(){this.dialog.querySelector(".progress-dialog-close-button").style.display="block"},t.prototype.setProgressValue=function(t){this.dialog.querySelector(".progress-dialog-bar-value").innerHTML=Math.round(t)+"%",this.dialog.querySelector(".progress-dialog-bar-cursor").style.width=t+"%"},t.prototype.addInfo=function(t,e){void 0===e&&(e=r.INFO),this.dialog.querySelector(".progress-dialog-infos").innerHTML+='<span class="'.concat(e,'">').concat(t,"</span><br/>")},t.prototype.open=function(){this.dialog.style.display="block",this.setProgressValue(0),this.dialog.querySelector(".progress-dialog-close-button").style.display="none",this.dialog.querySelector(".progress-dialog-infos").innerHTML=""},t.prototype.close=function(){this.dialog.style.display="none"},t}();n.ProgressDialog=i},{}],29:[function(t,e,n){"use strict";n.__esModule=!0,n.SerialOutput=void 0;var r=function(){function t(t){this.output=document.createElement("div"),this.output.classList.add("serial_output"),t.append(this.output)}return t.prototype.write=function(t){this.output.innerText+=t,this.output.scrollTop=this.output.scrollHeight},t.prototype.clear=function(){this.output.innerText=""},t}();n.SerialOutput=r},{}],30:[function(t,e,n){"use strict";n.__esModule=!0,n.APP_VERSION=void 0,n.APP_VERSION="REL__main_0fb1a03_2022-04-06"},{}]},{},[14]);